//Cabin huge: Comforts
@PART[dsak_cabin3]:NEEDS[Kerbalism,ProfileDefault]:FOR[AirlineKuisine]
{
	@entryCost *= 1.2
	@cost *= 1.25
	@description = Reinventing the classic cabin was a decision met with surprising amounts of approval from C7 Aerospace. Not that C7 was expected to have a problem with the proposal anyway. Now someone came up with the brilliant idea to specify an array of specific internal layouts for the cabin specifically for the goal of effectively making a spaceplane into a livable long-term abode. Unlike the Mk2 cabins, the Mk3 is geared towards personal and household-level living spaces and little more.
	@tags = _kerbalism
	@MODEL
	{
		@texture,0 = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3_core_kism
	}
	MODULE:NEEDS[FeatureComfort]
	{
		name = Comfort
		desc = Engineered to be as though a house in a plane, this cabin does even better, with its size, to help crew stay mentally and physically fit. The only thing really missing is artificial gravity.
		bonus = exercise
	}
}

//Processor A: Hydroponics/Greenhouse
@PART[dsak_proc_3a]:NEEDS[Kerbalism,ProfileDefault]:FOR[AirlineKuisine]
{
	@entryCost *= 1.6
	@cost *= 2.2
	@mass *= 1.6
	@title = DS Mk3 Inline Greenhouse
	@description = While every other manufacturing company sets out to rightfully invent things to make space travel safer, smarter, and faster, Deep Sky seeks to make space travel overall more enjoyable, homely, and to keep the snack options colorful. In comes this Mk3 sized Greenhouse. It's just as effective as the one from TripleZeta, and is form-fitting for interplanetary spaceplanes.
	@tags = _kerbalism
	@MODEL
	{
		@texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3proc_a_kism
	}
	
	MODULE
	{
		name = Greenhouse
		// name of resource produced by harvests
		crop_resource = Food
		// amount of resource produced by harvests
		crop_size = 660.45
		// growth per-second when all conditions apply
		crop_rate = 0.00000023148
		// EC/s consumed by the lamp at max intensity
		ec_rate = 2.5

		// minimum lighting flux required for growth, in W/m^2
		light_tolerance = 400.0
		// minimum pressure required for growth, in sea level atmospheres
		pressure_tolerance = 0.1
		// maximum radiation allowed for growth in rad/s, considered after shielding is applied
		radiation_tolerance = 0.000008333
		INPUT_RESOURCE
		{
			name = CarbonDioxide
			rate = 0.02782
		}
		INPUT_RESOURCE
		{
			name = Water
			rate = 0.0000764
		}
		OUTPUT_RESOURCE
		{
			name = Oxygen
			rate = 0.02758
		}
	}

	MODULE
	{
		name = Habitat
		toggle = false
	}

	MODULE
	{
		name = ProcessController
		resource = _PressureControl
		title = Pressure control
		capacity = 0.2143
		running = true
	}

	RESOURCE
	{
		name = Waste
		amount = 0
		maxAmount = 10
	}
	RESOURCE
	{
		name = Ammonia
		amount = 1000
		maxAmount = 1000
	}
	RESOURCE
	{
		name = CarbonDioxide
		amount = 10000
		maxAmount = 10000
	}
	// To support the pressure control
	RESOURCE
	{
		name = Nitrogen
		amount = 10000
		maxAmount = 10000
	}
	RESOURCE
	{
		name = Water
		amount = 50
		maxAmount = 50
	}
}

//Processor B: Fuel Cell
@PART[dsak_proc_3b]:NEEDS[Kerbalism,ProfileDefault]:FOR[AirlineKuisine]
{
	@entryCost *= 1.2
	@cost *= 1.4
	@mass *= 1.4
	@title = DS Mk3 Inline Fuel Cell Array
	@description = When the going gets tough, the tough get a beefy inline power source... A very beefy inline power source.
	@tags = _kerbalism
	@MODEL
	{
		@texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3proc_b_kism
	}
	
	MODULE
	{
		name = ProcessController
		resource = _FuelCell
		title = Fuel cell
		capacity = 65
	}

	MODULE:NEEDS[FeatureReliability]
	{
		name = Reliability
		type = ProcessController
		title = Fuel Cell
		redundancy = Power Generation
		repair = Engineer
		mtbf = 72576000 // 8y
		extra_cost = 1.0
		extra_mass = 0.5
	}
}

//Processor C: Chemical Plant (ISRU)
@PART[dsak_proc_3c]:NEEDS[Kerbalism,ProfileDefault]:FOR[AirlineKuisine]
{
	@entryCost *= 1.2
	@cost *= 1.8
	@mass *= 1.5
	@title = DS Mk3 Inline Chemical Plant
	@description = Some say bigger is better. Well those folks aren't wrong. Compared to the Mk2 version, this one boasts 4.29x the expected throughput.
	@tags = _kerbalism
	@MODEL
	{
		@texture = Mk3Fuselage, DeepSky/AirlineKuisine/TexturesMk3/mk3proc_c_kism
	}
	
	MODULE
	{
		name = ProcessController
		resource = _WaterElectrolysis
		title = Water electrolysis
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _Sabatier
		title = Sabatier process
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _Haber
		title = Haber process
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _WasteIncinerator
		title = Waste incinerator
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _WasteCompressor
		title = Waste compressor
		capacity = 18.4
	}
  
  MODULE
	{
		name = ProcessController
		resource = _Anthraquinone
		title = Anthraquinone process
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _HydrazineProduction
		title = Hydrazine production
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _MRE
		title = MRE
		capacity = 18.4
	}

	MODULE
	{
		name = ProcessController
		resource = _SOE
		title = SOE
		capacity = 18.4
	}

	MODULE
	{
		name = Configure
		title = Chemical Plant
		slots = 1

		SETUP
		{
			name = Water Electrolysis
			desc = Split <b>Water</b> into its <b>Hydrogen</b> and <b>Oxygen</b> components.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WaterElectrolysis
			}
		}

		SETUP
		{
			name = Sabatier Process

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Sabatier
			}
		}

		SETUP
		{
			name = Haber Process
			desc = Produce <b>Ammonia</b> by <b>Nitrogen</b> fixation.

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Haber
			}
		}
		
		SETUP
		{
			name = Waste Incinerator
			desc = Produce <b>CarbonDioxide</b> by combustion of <b>Waste</b> with <b>Oxygen</b>. Includes a small exhaust turbine generator.
			tech = precisionEngineering

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WasteIncinerator
			}
		}

		SETUP
		{
			name = Waste Compressor
			desc = Compact <b>Waste</b> to the density of lead, for use in radiation shielding.
			tech = precisionEngineering

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _WasteCompressor
			}
		}

		SETUP
		{
			name = Anthraquinone Process
			desc = Synthesize <b>Oxidizer</b> using a redox of <b>Oxygen</b> and <b>Hydrogen</b>.
			tech = advScienceTech

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _Anthraquinone
			}
		}

		SETUP
		{
			name = Hydrazine Production
			desc = <b>Oxidizer</b> and <b>Ammonia</b> react to produce <b>MonoPropellant</b> and <b>Water</b>.
			tech = advScienceTech

			MODULE
			{
			type = ProcessController
			id_field = resource
			id_value = _HydrazineProduction
			}
		}

		SETUP
		{
		name = Solid Oxide Electrolysis
		desc = Transform <b>CarbonDioxide</b> into <b>Oxygen</b>.
		tech = experimentalScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _SOE
			}
		}

		SETUP
		{
			name = Molten Regolith Electrolysis
			desc = Extract <b>Oxygen</b> out of <b>Ore</b>.
			tech = experimentalScience

			MODULE
			{
				type = ProcessController
				id_field = resource
				id_value = _MRE
			}
		}

		MODULE:NEEDS[FeatureReliability]
		{
			name = Reliability
			type = ProcessController
			title = Chemical Plant
			repair = Engineer
			mtbf = 72576000 // 8y
			extra_cost = 1.0
			extra_mass = 0.2
		}
	}
}